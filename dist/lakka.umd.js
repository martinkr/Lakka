/*! Lakka, github.com/martinkr/Lakka */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.lakka=t():e.lakka=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{after:()=>L,before:()=>M,configuration:()=>J,flush:()=>z,ignore:()=>D,recognize:()=>I,remove:()=>P,time:()=>A});const r={include:[],exclude:[],minutes:60};var n=["include","exclude","minutes"],o=Object.assign({},r),u=function(e,t){var r=[e,t].filter((function(e){return e}));if(!function(e){return 0!==e.length&&(1!==e.length||e[0]===Object(e[0]))&&(1===e.length&&e[0]===Object(e[0])?Object.keys(e[0]).every((function(e){return n.includes(e)})):2===e.length&&"minutes"===e[0]?"number"==typeof Number(e[1])&&!1===Number.isNaN(Number(e[1]))&&!1===Array.isArray(e[1])&&"boolean"!=typeof e[1]:2===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]&&n.includes(e[0]))}(r))throw new Error;return r[0]===Object(r[0])?(o=Object.assign(o,r[0]),!0):"include"===e||"exclude"===e?("string"==typeof t&&(t=new RegExp(t)),o[e].some((function(e){return e.source===t.source}))||o[e].push(t),!0):(o[e]=t,!0)};const c={get:function(e){return function(e){if(!e||"string"!=typeof e||!0!==n.includes(e))throw new Error;return o[e]}(e)},set:function(e,t){return u(e,t)}};const i=function(e){return["200","203","226"].includes(e)};var s=[new RegExp("must-revalidate"),new RegExp("no-store"),new RegExp("no-cache")];const f=function(e){return"string"!=typeof e||!e||s.map((function(t){return t.test(e)})).every((function(e){return!1===e}))};const a=function(e,t,r){var n=(new Date).getTime();try{return function(e,t){if(!e||!t)throw new Error;var r,n=/max-age=([0-9]*)/g.exec(e);if(!n||!n[1])throw new Error;try{r=Number(n[1])}catch(e){throw new Error}return Number(t+r)}(e,n)}catch(e){}try{return function(e){if(!e||Number(e)<=0)throw new Error;var t=new Date(e).getTime();if(new RegExp("/^[0-9]*$/gm").test(t)||isNaN(t)||t<0)throw new Error;return t}(t)}catch(e){}return Number(n+r)};var l=[new RegExp("application/json"),new RegExp("text/x-json"),new RegExp("text/plain"),new RegExp("text/html")];const h=function(e){return!("string"!=typeof e||!e)&&l.map((function(t){return t.test(e)})).some((function(e){return!0===e}))};var w=function e(t,r,n){var o;if(!t||!r)throw new Error;try{switch(t){case"set":try{o=JSON.parse(window.localStorage.getItem("lakka"))}catch(e){}if(o||(o={}),!n&&"string"!=typeof n&&null!==n)throw new Error;// if (typeof (value) !== "string") {
return null===n?delete o[r]:o[r]=n,window.localStorage.setItem("lakka",JSON.stringify(o)),!0;case"get":try{o=JSON.parse(window.localStorage.getItem("lakka"))}catch(e){return o={},null}return o[r]||null;case"del":return e("set",r,null);case"flush":return window.localStorage.setItem("lakka",JSON.stringify({}))}}catch(e){throw new Error(e)}};const g={get:function(e){return w("get",e)},set:function(e,t){return w("set",e,t)},del:function(e){return w("del",e)},flush:function(){return w("flush","*")}};const p=function(e){if("string"!=typeof e)throw new Error;return escape(e)};const y=function(e){return function(t){return function(r){if(!e&&r)return r;if(!e&&!r||!t)return null;var n=e[t]||e[t.toLowerCase()];return n||(!n&&r?r:null)}}};var d=6e4*c.get("minutes");const m=function(e,t,r){if("string"!=typeof e||"string"!=typeof t||!1===(r&&r instanceof Object&&r.constructor===Object))throw new Error;var n={headers:{}};try{n.key=p(e),n.status=200,n.statusText="cache",n.responseText=t,n.until=a(y(r)("Cache-Control")(null),y(r)("Expires")(null),d),n.headers.Status="".concat(n.status," ").concat(n.statusText),n.headers["Content-Type"]=y(r)("Content-Type")("text/plain"),n.headers["Cache-Control"]=y(r)("Cache-Control")(null),n.headers.Expires=y(r)("Expires")(null),Object.keys(n.headers).forEach((function(e){return null==n.headers[e]&&delete n.headers[e]}))}catch(e){throw new Error}return n};const E=function(e){if(!e&&0!==e||e instanceof Error)throw new Error};const b=function(e){return function(t){return function(r){if(!e||"function"!=typeof e)throw new Error;if(!t||!t.headers||!r)return!0;var n=t.headers[r]||t.headers[r.toLowerCase()];return!n||(E(e(n)),!0)}}};const x=function(e){return function(t){return function(r){E(e.set(t,r))}}};const v=function(e,t){if("string"!=typeof e||!0!==Array.isArray(t))throw new Error;return t.map((function(t){return t.test(e)})).some((function(e){return!0===e}))};var j=6e4*c.get("minutes"),O=function(e){var t=c.get("include"),r=c.get("exclude");if(r.length&&v(e,r))throw new Error;if(t.length&&!1===v(e,t))throw new Error;return!0};const C=function(e,t,r,n){if("string"!=typeof e||"string"!=typeof t||"number"!=typeof r&&"string"!=typeof r||!1==(n instanceof Object&&n.constructor===Object))throw new Error;var o,u=String(r);try{O(e),E(i(u)),b(f)(n)("Cache-Control"),b(h)(n)("Content-Type"),E(a("",y(n.headers)("Expires")(null),j)>=Date.now())}catch(e){throw new Error}try{o=m(e,t,n.headers),x(g)(p(e))(o)}catch(e){throw new Error}return o};const k=function(e){return!!(e&&e.until&&e.until>=Date.now())};const N=function(e){return function(t){var r=e.get(t);if(!k(r))throw e.del(t),new Error;return r}};var S=function(e){var t=c.get("include"),r=c.get("exclude");if(r.length&&v(e,r))throw new Error;if(t.length&&!1===v(e,t))throw new Error;return!0};const T=function(e,t){if("string"!=typeof e||!1===(t&&t instanceof Object&&t.constructor===Object))throw new Error;try{return S(e),b(f)(t)("Cache-Control"),b(h)(t)("Accept"),b(h)(t)("Content-Type"),N(g)(p(e))}catch(e){throw new Error}};var R={time:function(e){return c.set("minutes",e)},ignore:function(e){return c.set("exclude",e)},recognize:function(e){return c.set("include",e)},configuration:function(e){return c.set(e)},remove:function(e){return g.del(e)},flush:function(){return g.flush()},after:function(e,t,r,n){return C(e,t,r,n)},before:function(e,t){return T(e,t)}};var A=R.time,D=R.ignore,I=R.recognize,J=R.configuration,P=R.remove,z=R.flush,L=R.after,M=R.before;return t})()}));
//# sourceMappingURL=lakka.umd.js.map